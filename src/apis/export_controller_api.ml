(*
 * This file has been generated by the OCamlClientCodegen generator for openapi-generator.
 *
 * Generated by: https://openapi-generator.tech
 *
 *)

let export_entities ~export_type ~api_key ~output_format ?filter ?list_separator_token ?exclude_previously_exported ?created_earliest_time ?created_oldest_time () =
    let open Lwt in
    let uri = Request.build_uri "/export" in
    let headers = Request.default_headers in
    let headers = Cohttp.Header.add headers "x-api-key" Request.api_key in
    let uri = Request.add_query_param uri "exportType" Enums.show_exporttype export_type in
    let uri = Request.add_query_param uri "apiKey" (fun x -> x) api_key in
    let uri = Request.add_query_param uri "outputFormat" Enums.show_outputformat output_format in
    let uri = Request.maybe_add_query_param uri "filter" (fun x -> x) filter in
    let uri = Request.maybe_add_query_param uri "listSeparatorToken" (fun x -> x) list_separator_token in
    let uri = Request.maybe_add_query_param uri "excludePreviouslyExported" string_of_bool exclude_previously_exported in
    let uri = Request.maybe_add_query_param uri "createdEarliestTime" (fun x -> x) created_earliest_time in
    let uri = Request.maybe_add_query_param uri "createdOldestTime" (fun x -> x) created_oldest_time in
    Cohttp_lwt_unix.Client.call `GET uri ~headers >>= fun (resp, body) ->
    Request.read_json_body_as_list_of (JsonSupport.to_string) resp body

let get_export_link ~export_type ~export_options_t ?api_key () =
    let open Lwt in
    let uri = Request.build_uri "/export" in
    let headers = Request.default_headers in
    let headers = Cohttp.Header.add headers "x-api-key" Request.api_key in
    let uri = Request.add_query_param uri "exportType" Enums.show_exporttype export_type in
    let uri = Request.maybe_add_query_param uri "apiKey" (fun x -> x) api_key in
    let body = Request.write_as_json_body Export_options.to_yojson export_options_t in
    Cohttp_lwt_unix.Client.call `POST uri ~headers ~body >>= fun (resp, body) ->
    Request.read_json_body_as (JsonSupport.unwrap Export_link.of_yojson) resp body

